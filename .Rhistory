# ggsave("temp.jpeg",device = "jpeg")
g
# china_df$R0 <- as.factor(china_df$R0)
# jpeg("1.jpeg")
g <- ggplot(data = china_df,aes(fill = R0))   + scale_fill_manual(values = c("#7c7c7c","#00ba38", "#b4f27e", "#f8766d")) +  geom_sf()
# dev.off()
# ggsave("temp.jpeg",device = "jpeg")
g
sc <- scale_colour_gradientn(colours = myPalette(100))
# china_df$R0 <- as.factor(china_df$R0)
# jpeg("1.jpeg")
g <- ggplot(data = china_df,aes(fill = R0)) + scale_color_gradient(low = "#ffffff",high = "red")
#scale_fill_manual(values = c("#7c7c7c","#00ba38", "#b4f27e", "#f8766d")) +  geom_sf()
# dev.off()
# ggsave("temp.jpeg",device = "jpeg")
g
china_df
incidence_df$R0 <- r0_vals$`Region based R0 (B)`
incidence_df <- incidence_df[!is.na(incidence_df$R0),]
# print(incidence_df)
china_df <- merge(china_sf,incidence_df,by="ADM2_ZH",all.x=T)
# china_df$R0 <- as.numeric(levels(china_df$R0))[china_df$R0]
# print(china_df$R0)
china_df$R0 <- sapply(china_df$R0,round,3)
china_df$R0 <- replace_na(china_df$R0,0)
# china_df$R0 <- as.factor(china_df$R0)
# jpeg("1.jpeg")
g <- ggplot(data = china_df,aes(fill = R0)) + scale_color_gradient(low = "#ffffff",high = "red")
#scale_fill_manual(values = c("#7c7c7c","#00ba38", "#b4f27e", "#f8766d")) +  geom_sf()
# dev.off()
# ggsave("temp.jpeg",device = "jpeg")
g
china_df
china_df$R0
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
myPalette <- colorRampPalette(rev(brewer.pal(9, "Reds")))
sc <- scale_colour_gradientn(colours = myPalette(100),limits = c(0,3))
sc
print(sc)
myPalette()
myPalette
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
traceback()
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/driver.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/driver.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/case_rmse.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/case_rmse.R')
print(as.data.frame(performance_list))
write.csv(performance_list,"rmse.csv")
write.csv(performance_list$rmse,"rmse.csv")
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/case_rmse.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/case_rmse.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/case_rmse.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/case_rmse.R')
matrix(data=performance_list$rmse,nrow = 5,ncol=3)
z<-matrix(data=performance_list$rmse,nrow = 5,ncol=3)
write.csv("rmse.csv",transpose(z))
t(z)
write.csv("rmse.csv",t(z))
write.csv("rmse.csv",t(z))
y<-as.data.frame(t(z))
y
write.csv("rmse.csv",y)
write.csv("rmse.csv",y)
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/case_rmse.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/driver.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/case_rmse.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/driver.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/case_rmse.R')
cumulative_case
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/case_rmse.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/case_rmse.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/case_rmse.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/case_rmse.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/case_rmse.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/case_rmse.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/case_rmse.R')
rmse
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/case_rmse.R')
apply(cumulative_case,2,sum)
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/case_rmse.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/plot_visuals.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/plot_visuals.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/province_clustering.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/province_clustering.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/province_clustering.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/province_clustering.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/province_clustering.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/plot_visuals.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/plot_visuals.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/plot_visuals.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/province_clustering.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/plot_visuals.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/plot_visuals.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/plot_visuals.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/province_clustering.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/plot_visuals.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/plot_visuals.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/plot_visuals.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/province_clustering.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/province_clustering.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/province_clustering.R')
colnames(new_data)
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/province_clustering.R')
colnames(new_data)
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/province_clustering.R')
colnames(new_data)
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/province_clustering.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/province_clustering.R')
colnames(new_data)
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/plot_visuals.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/plot_visuals.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/plot_visuals.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/plot_visuals.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/plot_visuals.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/driver.R')
ga <- readRDS("outputs/group2_all.rds")
ga <- readRDS("outputs/group1_all.rds")
gd <- readRDS("outputs/group2_all_age.rds")
match(ga,gd)
ga[]
ga[3]
gd[]0
gd[10]
match(ga,gd)
length(ga)
length(gd)
ga[]0
ga[10]
gd[3]
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
china_sf$ADM2_EN == "Linxia Hui Autonomous"
china_sf[china_sf$ADM2_EN == "Linxia Hui Autonomous",]
prefectures["Linxia Hui Autonomous"]
prefectures["Linxia Hui Autonomous",]
z <- prefectures["Linxia Hui Autonomous",]
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
ga1 <- readRDS("outputs/group1_all.rds")
ga1 <- readRDS("outputs/group1_all.rds")
gd2 <- readRDS("outputs/group2_all_age.rds")
match(ga1,gd2)
ga1[10]
gd2[11]
x <- match(ga1,gd2)
x[!is.na(x)]
x <- x[!is.na(x)]
x
gd2[4]
gd2[11]
gd2[20]
gd2[68]
gd2[92]
prefectures[gd2[92]]
prefectures[gd2[92],]
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/plot_visuals.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/plot_visuals.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/plot_visuals.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/plot_visuals.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/plot_visuals.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/plot_visuals.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/plot_visuals.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/plot_visuals.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/plot_visuals.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/province_clustering.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/driver.R')
ga1 <- readRDS("outputs/group1_all.rds")
gd2 <- readRDS("outputs/case_model_group2_all_age.rds")
gd2 <- readRDS("outputs/group2_all_age.rds")
gd2 <- readRDS("outputs/rds/group2_all_age.rds")
ga1 <- readRDS("outputs/rds/group1_all.rds")
match(ga1,gd2)
gd2[3]
gd2[4]
data_all[data_all$Region_EN = gd2[4]]
data_all[data_all$Region_EN == gd2[4]]
data_all[data_all$Region_EN == gd2[4],]
summary(data_all)
testData <- data_all
rownames(testData) <- data_all$Region_EN
testData$Region_EN <- NULL
summary(testData[ga1,])
gd1 <- readRDS("outputs/rds/group1_all_age.rds")
summary(testData[gd1,])
testData["Turfan",]
summary(testData[,])
summary(testData[gd2,])
testData["Binzhou",]
testData["Tangshan",]
summary(testData[,])
type = "only_age"
# g1 <- readRDS(paste("outputs/rds/group1_",type,".rds",sep = ""))
g2 <- readRDS(paste("outputs/rds/group2_",type,".rds",sep = ""))
g3 <- readRDS(paste("outputs/rds/group3_",type,".rds",sep = ""))
s <- read.csv("states.csv",header = T)
s <- s[,2]
z = array(0,dim = length(s))
for (i in 1:length(s)){
# print(s[i,])
if( s[i] %in% g1){
z[i] = 1
}else if(s[i] %in% g2){
z[i] = 2
}else if(s[i] %in% g3){
z[i] = 3
}
else{
z[i] <- NA
}
}
write.csv(z,"tmp.csv")
g1 <- readRDS(paste("outputs/rds/group1_",type,".rds",sep = ""))
g2 <- readRDS(paste("outputs/rds/group2_",type,".rds",sep = ""))
g3 <- readRDS(paste("outputs/rds/group3_",type,".rds",sep = ""))
s <- read.csv("states.csv",header = T)
s <- s[,2]
z = array(0,dim = length(s))
for (i in 1:length(s)){
# print(s[i,])
if( s[i] %in% g1){
z[i] = 1
}else if(s[i] %in% g2){
z[i] = 2
}else if(s[i] %in% g3){
z[i] = 3
}
else{
z[i] <- NA
}
}
write.csv(z,"tmp.csv")
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
summary(testData[,"age65_ratio"])
summary(testData["Binzhou","age65_ratio"])
(testData["Binzhou","age65_ratio"])
(testData["Tangshan","age65_ratio"])
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/driver.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/plot_visuals.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/plot_visuals.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/plot_visuals.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/plot_visuals.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/plot_visuals.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/plot_visuals.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/driver.R')
gc1 <- readRDS("outputs/rds/group1_without_mf.rds")
gd2 <- readRDS("outputs/rds/group2_all_age.rds")
match(gc1,gd2)
gd2[4]
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/province_clustering.R')
testDa
testData <- data_all
testData <- data_all
rownames(testData) <- data_all$Region_EN
testData$Region_EN <- NULL
testData["Turfan",]
summary(testData)
summary(testData[gc1,])
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/driver.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/plot_visuals.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/plot_visuals.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/driver.R')
ga1 <- readRDS("outputs/rds/group1_all.rds")
ga2 <- readRDS("outputs/rds/group2_all.rds")
ga3 <- readRDS("outputs/rds/group3_all.rds")
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/province_clustering.R')
testData <- data_all
rownames(testData) <- data_all$Region_EN
testData$Region_EN <- NULL
testData[ga1,]
summary(ga1)
summary(testData[ga1,])
summary(testData[ga1,])
summary(testData[ga2,])
summary(testData[ga3,])
ga1 <- readRDS("outputs/rds/group1_all_age.rds")
ga2 <- readRDS("outputs/rds/group1_all_age.rds")
ga1 <- readRDS("outputs/rds/group1_all_age.rds")
ga2 <- readRDS("outputs/rds/group2_all_age.rds")
ga3 <- readRDS("outputs/rds/group3_all_age.rds")
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/driver.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
ge
china_sf[1]
china_sf[1]$OBJECTID
china_sf$ADM0_PCODE
china_sf$Admin_type
china_sf[1]$geometry$xmin
china_sf[1]$geometry
z <-china_sf[1]$geometry
z
z$bbox
st_coordinates(z)
mean(st_coordinates(z))
mean(st_coordinates(z)$X)
mean(st_coordinates(z)[1])
mean(st_coordinates(z)[2])
y <- st_coordinates(z)
y[["X"]]
y
y[1,]
y[1,"X"]
st_coordinates(china_sf$geometry)
st_coordinates(china_sf$geometry[1])
class(china_sf$geometry[1])
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
ge
lapply(china_sf$geometry,mean)
warnings()
lapply(china_sf$geometry,st_coordinates)
z < -lapply(china_sf$geometry,st_coordinates)
z <- lapply(china_sf$geometry,st_coordinates)
class(z)
z[[1]]
z <- lapply(china_sf$geometry,st_coordinates)
z$x
y <- lapply(z, mean)
y[[1]]
y <- lapply(z, apply,2,mean)
y[[1]]
y <- lapply(z, apply,2,mean)$X
y
y <- lapply(z, apply,2,mean)[,"X"]
y <- lapply(z, apply,2,mean)[1,"X"]
y <- lapply(z, apply,2,mean)["X"]
y
y <- lapply(z, apply,2,mean)
y[[2]]
y[[3]]
y[[3]]["X"]
do.call("c",y)
do.call("c",y[,1])
as.data.frame(y)
do.call("rbind",y)
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
ge
traceback()
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
ge
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
ge
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
zzz
china_df <- merge(china_sf,incidence_df,by="ADM2_ZH",all.x=T)
zzz <- lapply(china_sf$geometry,st_coordinates)
zzz  <- lapply(z, apply,2,mean)
zzz <- do.call("rbind",zzz)
china_df <- cbind(china_df,X= zzz[,"X"],Y = zzz[,"Y"])
china_df$R0 <- sapply(china_df$R0,round,3)
china_df$R0 <- replace_na(china_df$R0,0)
china_df$R0 <- as.factor(china_df$R0)
china_df[1,]
z <- lapply(china_sf$geometry,st_coordinates)
y <- lapply(z, apply,2,mean)
z
z[[]]
z[[1]]
china_sf[1,]
china_sf[1,"geometry"]
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
china_sf[[1]]
china_sf[1,]
china_sf[1,"ADM2_EN"]
china_sf[1,"geometry"]
st_coordinates(china_sf[1,"geometry"])
st_coordinates(china_df[1,"geometry"])
china_df[1,""]
china_df[1,]
st_coordinates(china_df[1,"geometry"])
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
st_coordinates(china_df[1,"geometry"])
zzz <- lapply(china_df$geometry,st_coordinates)
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/province_clustering.R')
summary(data_all$min_min_temp)
pre_peak <- 0 # -1 is 2 before peak, 2 is 2 after
omit_recent <- 0
omit_conf <- 0
confirmed_cases_all <- read.csv("data/chinesedata/New_confirmed.txt",header = T,sep = "\t")
confirmed_cases_all$Region_EN <- make.unique(as.character(confirmed_cases_all$Region_EN))
rownames(confirmed_cases_all) <- confirmed_cases_all$Region_EN
confirmed_cases_all$Region_CN <- confirmed_cases_all$Region_EN <- NULL
confirmed_cases_all[confirmed_cases_all == -1] <- 0
confirmed_cases_all
su,(confirmed_cases_all)
sum(confirmed_cases_all)
sum(confirmed_cases_all,na.rm = T)
summary(data_all$mean_mean_temp)
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/driver.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
ge
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
replace(r0_vals$Region_EN,"Yulin","Yulin.2")
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
r0_vals[r0_vals$Region_EN=="Fouzhou"]
r0_vals[r0_vals$Region_EN=="Fouzhou",]
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
r0_vals[r0_vals$Region_EN=="Fuzhou",]
r0_vals[r0_vals$Region_EN=="Fuzhou.",]
r0_vals[r0_vals$Region_EN=="Fuzhou.1",]
incidence_df <- cbind(prefectures[r0_vals$Region_EN,1],r0_vals$`Region based R0 (A)`)
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
prefectures['Fuzhou.1']
prefectures['Fuzhou.1',1]
prefectures['Weihai.1',1]
prefectures['Weihai',1]
prefectures['Suzhou.1',1]
prefectures['Suzhou',1]
prefectures['Taizhou.1',1]
tiff("map_tmp.tiff",height = 3000,width = 3000,res=300,units = "px"  )
print(ga)
dev.off()
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
prefectures['Weihai',1]
prefectures['Weihai.',1]
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
View(sc)
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/plot_map.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/driver.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/scripts/main_model.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/driver.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/driver.R')
source('~/workspace/2020-ncov/stoch_model_V2_paper/R/driver.R')
